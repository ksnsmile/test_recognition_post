# -*- coding: utf-8 -*-
"""
Created on Tue Mar 25 16:02:36 2025

@author: USER
"""

import textdistance



ê´‘ì—­ìì¹˜ë‹¨ì²´_ë¦¬ìŠ¤íŠ¸ = {
    "ì„œìš¸", "ì„œìš¸ì‹œ", "ì„œìš¸íŠ¹ë³„ì‹œ", "ë¶€ì‚°", "ë¶€ì‚°ì‹œ", "ë¶€ì‚°ê´‘ì—­ì‹œ",
    "ëŒ€êµ¬", "ëŒ€êµ¬ì‹œ", "ëŒ€êµ¬ê´‘ì—­ì‹œ", "ì¸ì²œ", "ì¸ì²œì‹œ", "ì¸ì²œê´‘ì—­ì‹œ",
    "ê´‘ì£¼", "ê´‘ì£¼ì‹œ", "ê´‘ì£¼ê´‘ì—­ì‹œ", "ëŒ€ì „", "ëŒ€ì „ì‹œ", "ëŒ€ì „ê´‘ì—­ì‹œ",
    "ìš¸ì‚°", "ìš¸ì‚°ì‹œ", "ìš¸ì‚°ê´‘ì—­ì‹œ", "ì„¸ì¢…", "ì„¸ì¢…ì‹œ", "ì„¸ì¢…íŠ¹ë³„ìì¹˜ì‹œ",
    "ê²½ê¸°", "ê²½ê¸°ë„", "ê°•ì›", "ê°•ì›ë„", "ê°•ì›íŠ¹ë³„ìì¹˜ë„",
    "ì¶©ë¶", "ì¶©ì²­ë¶ë„", "ì¶©ë‚¨", "ì¶©ì²­ë‚¨ë„",
    "ì „ë¶", "ì „ë¼ë¶ë„", "ì „ë‚¨", "ì „ë¼ë‚¨ë„",
    "ê²½ë¶", "ê²½ìƒë¶ë„", "ê²½ë‚¨", "ê²½ìƒë‚¨ë„",
    "ì œì£¼", "ì œì£¼ì‹œ", "ì œì£¼íŠ¹ë³„ìì¹˜ë„"
}


ì„œìš¸_ê¸°ì´ˆìì¹˜ë‹¨ì²´_ë¦¬ìŠ¤íŠ¸ = {
    "ì¢…ë¡œêµ¬", "ì¤‘êµ¬", "ìš©ì‚°êµ¬", "ì„±ë™êµ¬", "ê´‘ì§„êµ¬",
    "ë™ëŒ€ë¬¸êµ¬", "ì¤‘ë‘êµ¬", "ì„±ë¶êµ¬", "ê°•ë¶êµ¬", "ë„ë´‰êµ¬",
    "ë…¸ì›êµ¬", "ì€í‰êµ¬", "ì„œëŒ€ë¬¸êµ¬", "ë§ˆí¬êµ¬", "ì–‘ì²œêµ¬",
    "ê°•ì„œêµ¬", "êµ¬ë¡œêµ¬", "ê¸ˆì²œêµ¬", "ì˜ë“±í¬êµ¬", "ë™ì‘êµ¬",
    "ê´€ì•…êµ¬", "ì„œì´ˆêµ¬", "ê°•ë‚¨êµ¬", "ì†¡íŒŒêµ¬", "ê°•ë™êµ¬"
}

ê²½ê¸°_ê¸°ì´ˆìì¹˜ë‹¨ì²´_ë¦¬ìŠ¤íŠ¸ = {
    "ìˆ˜ì›ì‹œ", "ì„±ë‚¨ì‹œ", "ê³ ì–‘ì‹œ", "ìš©ì¸ì‹œ", "ë¶€ì²œì‹œ",
    "ì•ˆì‚°ì‹œ", "ì•ˆì–‘ì‹œ", "ë‚¨ì–‘ì£¼ì‹œ", "í™”ì„±ì‹œ", "í‰íƒì‹œ",
    "ì˜ì •ë¶€ì‹œ", "ì‹œí¥ì‹œ", "íŒŒì£¼ì‹œ", "ê¹€í¬ì‹œ", "ê´‘ëª…ì‹œ",
    "ê´‘ì£¼ì‹œ", "êµ°í¬ì‹œ", "ì˜¤ì‚°ì‹œ", "ì´ì²œì‹œ", "ì•ˆì„±ì‹œ",
    "ì˜ì™•ì‹œ", "í•˜ë‚¨ì‹œ", "ì—¬ì£¼ì‹œ", "ì–‘í‰êµ°", "ë™ë‘ì²œì‹œ",
    "ê³¼ì²œì‹œ", "ê°€í‰êµ°", "ì—°ì²œêµ°", "ì–‘ì£¼ì‹œ", "í¬ì²œì‹œ",
    "êµ¬ë¦¬ì‹œ"
}

ê¸ˆì²œêµ¬_ë²•ì •ë™_ë¦¬ìŠ¤íŠ¸ = {
    "ê°€ì‚°ë™",
    "ë…ì‚°ë™",
    "ì‹œí¥ë™"
}


ì˜ì™•ì‹œ_ë²•ì •ë™_ë¦¬ìŠ¤íŠ¸ = {
    "ê³ ì²œë™",
    "ë¶€ê³¡ë™",
    "ì²­ê³„ë™",
    "ì˜¤ì „ë™",
    "ë‚´ì†ë™",
}
ì˜ì™•ì‹œ_ë„ë¡œëª…ì£¼ì†Œ_ë¦¬ìŠ¤íŠ¸ = {
    "ì² ë„ë°•ë¬¼ê´€ë¡œ", "ë°±ìš´ë¡œ", "ë¶€ê³¡ì¤‘ì•™ë¡œ", "í•™í˜„ë¡œ", "ì˜¤ì „ë¡œ",
    "ì™•ê³¡ë¡œ", "ê³ ì²œë¡œ", "ê³ ì‚°ë¡œ", "ë‚´ì†ë¡œ", "ë‚´ì†ì¤‘ì•™ë¡œ",
    "ë•ì˜ëŒ€ë¡œ", "í¬ì¼ë¡œ", "ê³„ì›ëŒ€ë¡œ", "ê²½ìˆ˜ëŒ€ë¡œ", "ì™•ë¦¼ë¡œ",
    "ë°±ìš´ë°¸ë¦¬ë¡œ", "ë¶€ê³¡ë§ê¸¸", "ì²­ê³„ë¡œ", "ì„±ê³ ê°œë¡œ", "ì˜¤ì „ë§ê¸¸"
}
ê¸ˆì²œêµ¬_ë„ë¡œëª…ì£¼ì†Œ_ë¦¬ìŠ¤íŠ¸ = {
    "ì„œë¶€ìƒ›ê¸¸", "ê°€ì‚°ë””ì§€í„¸1ë¡œ", "ê°€ì‚°ë””ì§€í„¸2ë¡œ", "ê°€ì‚°ë¡œ", "ê°€ì‚°ë¡œ3ê¸¸",
    "ê°€ì‚°ë¡œ5ê¸¸", "ê°€ì‚°ë¡œ7ê¸¸", "ê°€ì‚°ë¡œ9ê¸¸", "ê°€ì‚°ë¡œ11ê¸¸", "ê°€ì‚°ë¡œ12ê¸¸",
    "ê°€ì‚°ë¡œ14ê¸¸", "ê°€ì‚°ë¡œ16ê¸¸", "ê°€ì‚°ë¡œ18ê¸¸", "ê°€ì‚°ë¡œ20ê¸¸", "ê°€ì‚°ë¡œ22ê¸¸",
    "ê°€ì‚°ë¡œ24ê¸¸", "ê°€ì‚°ë¡œ26ê¸¸", "ê°€ì‚°ë¡œ28ê¸¸", "ê°€ì‚°ë¡œ30ê¸¸", "ê°€ì‚°ë¡œ32ê¸¸"
}

ì˜ì™•ì‹œ_ê±´ë¬¼ë²ˆí˜¸_ë¦¬ìŠ¤íŠ¸= {'142','176','4','8','12','18-3','18-5'}
ê¸ˆì²œêµ¬_ê±´ë¬¼ë²ˆí˜¸_ë¦¬ìŠ¤íŠ¸= {'822','876','64','70','86','90','96','102','156','168',
               '202','216','224','230-2','264','280'}



processed_results=[{'OCR_Text': 'Text 9: e ì„œìš¸ê¸ˆì²œêµ¬ê°€ì‚°ë™[ì„œë¶€ì…‹ê¸¸606]',
  'ê´‘ì—­ìì¹˜ë‹¨ì²´': ['ì„œìš¸'],
  'ê¸°ì´ˆìì¹˜ë‹¨ì²´': ['ê¸ˆì²œêµ¬'],
  'ë™/ì/ë©´': ['ê°€ì‚°ë™'],
  'ë„ë¡œëª…ì£¼ì†Œ': ['ì„œë¶€ì…‹ê¸¸'],
  'ê±´ë¬¼ë²ˆí˜¸': ['606'],
  'ì§€ë²ˆì£¼ì†Œ': [],
  'ìƒì„¸ì£¼ì†Œ': []},
 {'OCR_Text': 'Text 19: ê²½ê¸°ì˜ì™•ì‹œì›”ì•”ë™[ì² ë„ë°•ë¬¼ê´€ë¡œ176]',
  'ê´‘ì—­ìì¹˜ë‹¨ì²´': ['ê²½ê¸°'],
  'ê¸°ì´ˆìì¹˜ë‹¨ì²´': ['ì˜ì™•ì‹œ'],
  'ë™/ì/ë©´': ['ì›”ì•”ë™'],
  'ë„ë¡œëª…ì£¼ì†Œ': ['ì² ë„ë°•ë¬¼ê´€ë¡œ'],
  'ê±´ë¬¼ë²ˆí˜¸': ['176'],
  'ì§€ë²ˆì£¼ì†Œ': [],
  'ìƒì„¸ì£¼ì†Œ': []},
 {'OCR_Text': 'Text 20: 360-1 -(ì›”ì•”ë™ í•œêµ­ì² ë„ê¸°ìˆ ',
  'ê´‘ì—­ìì¹˜ë‹¨ì²´': [],
  'ê¸°ì´ˆìì¹˜ë‹¨ì²´': [],
  'ë™/ì/ë©´': ['ì›”ì•”ë™'],
  'ë„ë¡œëª…ì£¼ì†Œ': [],
  'ê±´ë¬¼ë²ˆí˜¸': [],
  'ì§€ë²ˆì£¼ì†Œ': [],
  'ìƒì„¸ì£¼ì†Œ': []},
 {'OCR_Text': 'Text 21: 1/010-9010-1325 3 ì—°êµ¬ì›)ì£¼    ìš©ë°•ì§„ì°©',
  'ê´‘ì—­ìì¹˜ë‹¨ì²´': [],
  'ê¸°ì´ˆìì¹˜ë‹¨ì²´': ['ì—°êµ¬'],
  'ë™/ì/ë©´': [],
  'ë„ë¡œëª…ì£¼ì†Œ': [],
  'ê±´ë¬¼ë²ˆí˜¸': [],
  'ì§€ë²ˆì£¼ì†Œ': [],
  'ìƒì„¸ì£¼ì†Œ': []},
 {'OCR_Text': 'Text 36: ê¹€ì—´ì‹œ',
  'ê´‘ì—­ìì¹˜ë‹¨ì²´': [],
  'ê¸°ì´ˆìì¹˜ë‹¨ì²´': ['ê¹€ì—´ì‹œ'],
  'ë™/ì/ë©´': [],
  'ë„ë¡œëª…ì£¼ì†Œ': [],
  'ê±´ë¬¼ë²ˆí˜¸': [],
  'ì§€ë²ˆì£¼ì†Œ': [],
  'ìƒì„¸ì£¼ì†Œ': []},
 {'OCR_Text': 'Text 39: ê²½ê¸°ì˜ì™•ì‹œ ì›”ì•”(ë™[ì² ë„ë°•ë¬¼ê´€ë¡œ176]',
  'ê´‘ì—­ìì¹˜ë‹¨ì²´': ['ê²½ê¸°'],
  'ê¸°ì´ˆìì¹˜ë‹¨ì²´': ['ì˜ì™•ì‹œ'],
  'ë™/ì/ë©´': [],
  'ë„ë¡œëª…ì£¼ì†Œ': ['ì² ë„ë°•ë¬¼ê´€ë¡œ'],
  'ê±´ë¬¼ë²ˆí˜¸': ['176'],
  'ì§€ë²ˆì£¼ì†Œ': [],
  'ìƒì„¸ì£¼ì†Œ': []},
 {'OCR_Text': 'Text 42: (ì›”ì•”ë™ í•œêµ­ì² ë„ê¸°ìˆ ì—°êµ¬ì›) 7',
  'ê´‘ì—­ìì¹˜ë‹¨ì²´': [],
  'ê¸°ì´ˆìì¹˜ë‹¨ì²´': ['í•œêµ­ì² ë„ê¸°ìˆ ì—°êµ¬'],
  'ë™/ì/ë©´': ['ì›”ì•”ë™'],
  'ë„ë¡œëª…ì£¼ì†Œ': [],
  'ê±´ë¬¼ë²ˆí˜¸': [],
  'ì§€ë²ˆì£¼ì†Œ': [],
  'ìƒì„¸ì£¼ì†Œ': []},
 {'OCR_Text': 'Text 44: ë™101í˜¸í…ì§„í•™ [ì¹ ë„ë°•ë¬¼ê´€ë¡œ176]',
  'ê´‘ì—­ìì¹˜ë‹¨ì²´': [],
  'ê¸°ì´ˆìì¹˜ë‹¨ì²´': [],
  'ë™/ì/ë©´': [],
  'ë„ë¡œëª…ì£¼ì†Œ': ['ì¹ ë„ë°•ë¬¼ê´€ë¡œ'],
  'ê±´ë¬¼ë²ˆí˜¸': ['176'],
  'ì§€ë²ˆì£¼ì†Œ': [],
  'ìƒì„¸ì£¼ì†Œ': []},
 {'OCR_Text': 'Text 45: [ì›”ì•”ë™]',
  'ê´‘ì—­ìì¹˜ë‹¨ì²´': [],
  'ê¸°ì´ˆìì¹˜ë‹¨ì²´': [],
  'ë™/ì/ë©´': ['ì›”ì•”ë™'],
  'ë„ë¡œëª…ì£¼ì†Œ': [],
  'ê±´ë¬¼ë²ˆí˜¸': [],
  'ì§€ë²ˆì£¼ì†Œ': [],
  'ìƒì„¸ì£¼ì†Œ': []}]


import textdistance

### ê´‘ì—­ìì¹˜ë‹¨ì²´

def ê°€ì¥_ìœ ì‚¬í•œ_ê´‘ì—­ìì¹˜ë‹¨ì²´(ocr_ë‹¨ì–´, í›„ë³´_ë¦¬ìŠ¤íŠ¸):
    ìµœê³ _ìœ ì‚¬ë„ = 0
    ìµœê³ _ë§¤ì¹­ = None
    for í›„ë³´ in í›„ë³´_ë¦¬ìŠ¤íŠ¸:
        ìœ ì‚¬ë„ = textdistance.jaro_winkler(ocr_ë‹¨ì–´, í›„ë³´)
        if ìœ ì‚¬ë„ > ìµœê³ _ìœ ì‚¬ë„:
            ìµœê³ _ìœ ì‚¬ë„ = ìœ ì‚¬ë„
            ìµœê³ _ë§¤ì¹­ = í›„ë³´
    
    
    return ìµœê³ _ë§¤ì¹­, ìµœê³ _ìœ ì‚¬ë„

# ë³€í™˜ ë¡œê·¸
ìˆ˜ì •_ë¡œê·¸ = []

for í•­ëª© in processed_results:
    ê¸°ì¡´ê°’ë“¤ = í•­ëª©['ê´‘ì—­ìì¹˜ë‹¨ì²´']
    ìƒˆê°’ë“¤ = []
    í…ìŠ¤íŠ¸_ì´ë¦„ = í•­ëª©['OCR_Text'].split(":")[0].strip()

    for ì›ë³¸ in ê¸°ì¡´ê°’ë“¤:
        ìœ ì‚¬ê°’, ìœ ì‚¬ë„ = ê°€ì¥_ìœ ì‚¬í•œ_ê´‘ì—­ìì¹˜ë‹¨ì²´(ì›ë³¸, ê´‘ì—­ìì¹˜ë‹¨ì²´_ë¦¬ìŠ¤íŠ¸)
        if ìœ ì‚¬ë„ >= 0.70:
            ìƒˆê°’ë“¤.append(ìœ ì‚¬ê°’)
            if ì›ë³¸ == ìœ ì‚¬ê°’:
                ìˆ˜ì •_ë¡œê·¸.append(f"{í…ìŠ¤íŠ¸_ì´ë¦„} â–¶ '{ì›ë³¸}' âœ… ê·¸ëŒ€ë¡œ ì‚¬ìš©ë¨ (ìœ ì‚¬ë„: {ìœ ì‚¬ë„:.2f})")
            else:
                ìˆ˜ì •_ë¡œê·¸.append(f"{í…ìŠ¤íŠ¸_ì´ë¦„} â–¶ '{ì›ë³¸}' â†’ '{ìœ ì‚¬ê°’}' (ìœ ì‚¬ë„: {ìœ ì‚¬ë„:.2f})")
            
        else:
            ìƒˆê°’ë“¤.append(ì›ë³¸)
            ìˆ˜ì •_ë¡œê·¸.append(f"{í…ìŠ¤íŠ¸_ì´ë¦„} â–¶ '{ì›ë³¸}' âŒ ë³€í™˜ ì•ˆ ë¨ (ê°€ì¥ ìœ ì‚¬: '{ìœ ì‚¬ê°’}', ìœ ì‚¬ë„: {ìœ ì‚¬ë„:.2f})")

    í•­ëª©['ê´‘ì—­ìì¹˜ë‹¨ì²´'] = ìƒˆê°’ë“¤

# ë¡œê·¸ ì¶œë ¥
print("ğŸ” ê´‘ì—­ìì¹˜ë‹¨ì²´ ìœ ì‚¬ë„ ë¹„êµ ê²°ê³¼:")
for ë¡œê·¸ in ìˆ˜ì •_ë¡œê·¸:
    print(ë¡œê·¸)
    
# ê¸°ì´ˆìì¹˜ë‹¨ì²´

def ê°€ì¥_ìœ ì‚¬í•œ_ê¸°ì´ˆìì¹˜ë‹¨ì²´(ocr_ë‹¨ì–´, í›„ë³´_ë¦¬ìŠ¤íŠ¸):
    ìµœê³ _ìœ ì‚¬ë„ = 0
    ìµœê³ _ë§¤ì¹­ = None
    for í›„ë³´ in í›„ë³´_ë¦¬ìŠ¤íŠ¸:
        ìœ ì‚¬ë„ = textdistance.jaro_winkler(ocr_ë‹¨ì–´, í›„ë³´)
        if ìœ ì‚¬ë„ > ìµœê³ _ìœ ì‚¬ë„:
            ìµœê³ _ìœ ì‚¬ë„ = ìœ ì‚¬ë„
            ìµœê³ _ë§¤ì¹­ = í›„ë³´
    return ìµœê³ _ë§¤ì¹­, ìµœê³ _ìœ ì‚¬ë„


# ê¸°ì´ˆìì¹˜ë‹¨ì²´ ë³€í™˜ ë¡œê·¸
ê¸°ì´ˆìì¹˜ë‹¨ì²´_ìˆ˜ì •_ë¡œê·¸ = []

# ì „ì²´ processed_results ìˆœíšŒ
for í•­ëª© in processed_results:
    ê¸°ì¡´ê°’ë“¤ = í•­ëª©['ê¸°ì´ˆìì¹˜ë‹¨ì²´']
    ìƒˆê°’ë“¤ = []
    í…ìŠ¤íŠ¸_ì´ë¦„ = í•­ëª©['OCR_Text'].split(":")[0].strip()

    for ì›ë³¸ in ê¸°ì¡´ê°’ë“¤:
        ìœ ì‚¬ê°’, ìœ ì‚¬ë„ = ê°€ì¥_ìœ ì‚¬í•œ_ê¸°ì´ˆìì¹˜ë‹¨ì²´(ì›ë³¸, ì„œìš¸_ê¸°ì´ˆìì¹˜ë‹¨ì²´_ë¦¬ìŠ¤íŠ¸.union(ê²½ê¸°_ê¸°ì´ˆìì¹˜ë‹¨ì²´_ë¦¬ìŠ¤íŠ¸))
        
        if ìœ ì‚¬ë„ >= 0.70:
            ìƒˆê°’ë“¤.append(ìœ ì‚¬ê°’)
            if ì›ë³¸ == ìœ ì‚¬ê°’:
                ê¸°ì´ˆìì¹˜ë‹¨ì²´_ìˆ˜ì •_ë¡œê·¸.append(f"{í…ìŠ¤íŠ¸_ì´ë¦„} â–¶ '{ì›ë³¸}' âœ… ê·¸ëŒ€ë¡œ ì‚¬ìš©ë¨ (ìœ ì‚¬ë„: {ìœ ì‚¬ë„:.2f})")
            else:
                ê¸°ì´ˆìì¹˜ë‹¨ì²´_ìˆ˜ì •_ë¡œê·¸.append(f"{í…ìŠ¤íŠ¸_ì´ë¦„} â–¶ '{ì›ë³¸}' â†’ '{ìœ ì‚¬ê°’}' (ìœ ì‚¬ë„: {ìœ ì‚¬ë„:.2f})")
        else:
            ìƒˆê°’ë“¤.append(ì›ë³¸)
            ê¸°ì´ˆìì¹˜ë‹¨ì²´_ìˆ˜ì •_ë¡œê·¸.append(f"{í…ìŠ¤íŠ¸_ì´ë¦„} â–¶ '{ì›ë³¸}' âŒ ë³€í™˜ ì•ˆ ë¨ (ê°€ì¥ ìœ ì‚¬: '{ìœ ì‚¬ê°’}', ìœ ì‚¬ë„: {ìœ ì‚¬ë„:.2f})")

    í•­ëª©['ê¸°ì´ˆìì¹˜ë‹¨ì²´'] = ìƒˆê°’ë“¤


# ë¡œê·¸ ì¶œë ¥
print("\nğŸ” ê¸°ì´ˆìì¹˜ë‹¨ì²´ ìœ ì‚¬ë„ ë¹„êµ ê²°ê³¼:")
for ë¡œê·¸ in ê¸°ì´ˆìì¹˜ë‹¨ì²´_ìˆ˜ì •_ë¡œê·¸:
    print(ë¡œê·¸)


# ë„ë¡œëª… ì£¼ì†Œ 


def ê°€ì¥_ìœ ì‚¬í•œ_ë„ë¡œëª…ì£¼ì†Œ(ocr_ë‹¨ì–´, í›„ë³´_ë¦¬ìŠ¤íŠ¸):
    ìµœê³ _ìœ ì‚¬ë„ = 0
    ìµœê³ _ë§¤ì¹­ = None
    for í›„ë³´ in í›„ë³´_ë¦¬ìŠ¤íŠ¸:
        ìœ ì‚¬ë„ = textdistance.jaro_winkler(ocr_ë‹¨ì–´, í›„ë³´)
        if ìœ ì‚¬ë„ > ìµœê³ _ìœ ì‚¬ë„:
            ìµœê³ _ìœ ì‚¬ë„ = ìœ ì‚¬ë„
            ìµœê³ _ë§¤ì¹­ = í›„ë³´
    return ìµœê³ _ë§¤ì¹­, ìµœê³ _ìœ ì‚¬ë„

ì „ì²´_ë„ë¡œëª…ì£¼ì†Œ_ë¦¬ìŠ¤íŠ¸ = ê¸ˆì²œêµ¬_ë„ë¡œëª…ì£¼ì†Œ_ë¦¬ìŠ¤íŠ¸.union(ì˜ì™•ì‹œ_ë„ë¡œëª…ì£¼ì†Œ_ë¦¬ìŠ¤íŠ¸)


ë„ë¡œëª…ì£¼ì†Œ_ìˆ˜ì •_ë¡œê·¸ = []

for í•­ëª© in processed_results:
    ê¸°ì¡´ê°’ë“¤ = í•­ëª©['ë„ë¡œëª…ì£¼ì†Œ']
    ìƒˆê°’ë“¤ = []
    í…ìŠ¤íŠ¸_ì´ë¦„ = í•­ëª©['OCR_Text'].split(":")[0].strip()

    for ì›ë³¸ in ê¸°ì¡´ê°’ë“¤:
        ìœ ì‚¬ê°’, ìœ ì‚¬ë„ = ê°€ì¥_ìœ ì‚¬í•œ_ë„ë¡œëª…ì£¼ì†Œ(ì›ë³¸, ì „ì²´_ë„ë¡œëª…ì£¼ì†Œ_ë¦¬ìŠ¤íŠ¸)

        if ìœ ì‚¬ë„ >= 0.70:
            ìƒˆê°’ë“¤.append(ìœ ì‚¬ê°’)
            if ì›ë³¸ == ìœ ì‚¬ê°’:
                ë„ë¡œëª…ì£¼ì†Œ_ìˆ˜ì •_ë¡œê·¸.append(f"{í…ìŠ¤íŠ¸_ì´ë¦„} â–¶ '{ì›ë³¸}' âœ… ê·¸ëŒ€ë¡œ ì‚¬ìš©ë¨ (ìœ ì‚¬ë„: {ìœ ì‚¬ë„:.2f})")
            else:
                ë„ë¡œëª…ì£¼ì†Œ_ìˆ˜ì •_ë¡œê·¸.append(f"{í…ìŠ¤íŠ¸_ì´ë¦„} â–¶ '{ì›ë³¸}' â†’ '{ìœ ì‚¬ê°’}' (ìœ ì‚¬ë„: {ìœ ì‚¬ë„:.2f})")
        else:
            ìƒˆê°’ë“¤.append(ì›ë³¸)
            ë„ë¡œëª…ì£¼ì†Œ_ìˆ˜ì •_ë¡œê·¸.append(f"{í…ìŠ¤íŠ¸_ì´ë¦„} â–¶ '{ì›ë³¸}' âŒ ë³€í™˜ ì•ˆ ë¨ (ê°€ì¥ ìœ ì‚¬: '{ìœ ì‚¬ê°’}', ìœ ì‚¬ë„: {ìœ ì‚¬ë„:.2f})")

    í•­ëª©['ë„ë¡œëª…ì£¼ì†Œ'] = ìƒˆê°’ë“¤


print("\nğŸ” ë„ë¡œëª…ì£¼ì†Œ ìœ ì‚¬ë„ ë¹„êµ ê²°ê³¼:")
for ë¡œê·¸ in ë„ë¡œëª…ì£¼ì†Œ_ìˆ˜ì •_ë¡œê·¸:
    print(ë¡œê·¸)
#######################################################################################




from jamo import hangul_to_jamo
import textdistance

# ì ‘ë¯¸ì‚¬ ì œê±°: 'ì‹œ', 'êµ°', 'êµ¬', 'ë™', 'ì', 'ë©´', 'ë¡œ' ë“±
def ì œê±°_ì ‘ë¯¸ì‚¬(text):
    return text[:-1] if text.endswith(("ì‹œ", "êµ°", "êµ¬", "ë™", "ì", "ë©´", "ë¡œ")) and len(text) > 1 else text

# ìëª¨ ë¶„í•´
def ë¶„ë¦¬ëœ_ìëª¨(text):
    return ''.join(list(hangul_to_jamo(text)))

#âœ… 1. Jaro-Winkler + ì ‘ë¯¸ì‚¬ ì œê±°

def ìœ ì‚¬ë„_jaro_winkler_ì ‘ë¯¸ì‚¬(s1, s2):
    s1_core = ì œê±°_ì ‘ë¯¸ì‚¬(s1)
    s2_core = ì œê±°_ì ‘ë¯¸ì‚¬(s2)
    return textdistance.jaro_winkler(s1_core, s2_core)


#âœ… 2. Jaro + ì ‘ë¯¸ì‚¬ ì œê±°

def ìœ ì‚¬ë„_jaro_ì ‘ë¯¸ì‚¬(s1, s2):
    s1_core = ì œê±°_ì ‘ë¯¸ì‚¬(s1)
    s2_core = ì œê±°_ì ‘ë¯¸ì‚¬(s2)
    return textdistance.jaro(s1_core, s2_core)


#âœ… 3. Jaro + ìëª¨ ìœ ì‚¬ë„ + ì ‘ë¯¸ì‚¬ ì œê±° â†’ í‰ê· 

def ìœ ì‚¬ë„_jaro_ìëª¨_ì ‘ë¯¸ì‚¬(s1, s2):
    s1_core = ì œê±°_ì ‘ë¯¸ì‚¬(s1)
    s2_core = ì œê±°_ì ‘ë¯¸ì‚¬(s2)

    # ì¼ë°˜ Jaro
    jaro_score = textdistance.jaro(s1_core, s2_core)

    # ìëª¨ ê¸°ë°˜ Jaro
    s1_jamo = ë¶„ë¦¬ëœ_ìëª¨(s1_core)
    s2_jamo = ë¶„ë¦¬ëœ_ìëª¨(s2_core)
    jamo_score = textdistance.jaro(s1_jamo, s2_jamo)

    # í‰ê·  ë°˜í™˜
    return (jaro_score + jamo_score) / 2

import textdistance

def ìœ ì‚¬ë„_jaro_winkler(s1, s2):
    return textdistance.jaro_winkler(s1, s2)

s1 = "íƒœë™ë¡œ"
s2 = "ê¸ˆë™ë¡œ"

print(f"Jaro-Winkler ìœ ì‚¬ë„ (ì ‘ë¯¸ì‚¬ ì œê±° ì—†ìŒ):",ìœ ì‚¬ë„_jaro_winkler(s1, s2))
print("â‘  Jaro-Winkler + ì ‘ë¯¸ì‚¬ ì œê±°:", ìœ ì‚¬ë„_jaro_winkler_ì ‘ë¯¸ì‚¬(s1, s2))
print("â‘¡ Jaro + ì ‘ë¯¸ì‚¬ ì œê±°:", ìœ ì‚¬ë„_jaro_ì ‘ë¯¸ì‚¬(s1, s2))
print("â‘¢ Jaro + ìëª¨ + ì ‘ë¯¸ì‚¬ ì œê±°:", ìœ ì‚¬ë„_jaro_ìëª¨_ì ‘ë¯¸ì‚¬(s1, s2))



